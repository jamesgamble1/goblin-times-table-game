<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Goblin Times Table Battle</title>
  <style>
    body {
      background: #1c1c1c;
      color: #eee;
      font-family: 'Courier New', Courier, monospace;
      text-align: center;
      padding: 30px;
    }
    .goblin {
      font-size: 24px;
      margin: 20px;
      transition: transform 0.2s;
    }
    .goblin.hit {
      animation: shake 0.4s;
    }
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      50% { transform: translateX(10px); }
      75% { transform: translateX(-10px); }
      100% { transform: translateX(0); }
    }
    .question {
      font-size: 32px;
      margin: 20px;
    }
    input {
      font-size: 24px;
      padding: 10px;
      width: 100px;
    }
    button {
      font-size: 18px;
      padding: 10px 20px;
      margin-top: 10px;
    }
    .log {
      margin-top: 20px;
      font-size: 16px;
      color: #90ee90;
    }
    .hp-bar, .score-bar {
      margin: 10px;
    }
    #playerNameInput {
      font-size: 24px;
      padding: 8px;
      width: 200px;
      margin-bottom: 10px;
    }
    #gameArea {
      display: none;
    }
  </style>
</head>
<body>
  <h1>üßå Goblin Times Table Battle!</h1>

  <!-- Name Input Section -->
  <div id="nameSection">
    <p>Enter your name, brave warrior:</p>
    <input id="playerNameInput" type="text" placeholder="Your name..." />
    <br>
    <button onclick="startGame()">Start Game</button>
  </div>

  <!-- Game Area -->
  <div id="gameArea">
    <div class="score-bar" id="score">Score: 0</div>
    <div class="score-bar" id="playerHp">Your HP: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div class="goblin" id="goblinName">Goblin Appears...</div>
    <div class="hp-bar" id="goblinHp">Goblin HP: ‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div class="question" id="questionText">What's 3 √ó 4?</div>
    <input type="number" id="answer" onkeydown="if(event.key==='Enter') submitAnswer()" />
    <br>
    <button onclick="submitAnswer()">Attack!</button>
    <div class="log" id="logText"></div>
  </div>

  <script>
    const goblinNames = [
      "Grubnose the Gross", "Snaggletooth", "Mathcrusher",
      "Fungus Frank", "Gibble the Gooey", "Wartface", "Zog the Slow"
    ];

    let goblinHP = 5;
    let playerHP = 3;
    let score = 0;
    let currentQuestion = {};
    let startTime = 0;
    let playerName = "";

    function startGame() {
      playerName = document.getElementById("playerNameInput").value.trim() || "Hero";
      document.getElementById("nameSection").style.display = "none";
      document.getElementById("gameArea").style.display = "block";
      updateGoblin();
    }

    function randomGoblin() {
      return goblinNames[Math.floor(Math.random() * goblinNames.length)];
    }

    function randomQuestion() {
      const a = Math.floor(Math.random() * 10) + 1;
      const b = Math.floor(Math.random() * 10) + 1;
      return { a, b, answer: a * b };
    }

    function updateQuestion() {
      currentQuestion = randomQuestion();
      document.getElementById("questionText").textContent =
        `What's ${currentQuestion.a} √ó ${currentQuestion.b}?`;
      document.getElementById("answer").value = '';
      document.getElementById("answer").focus();
      startTime = new Date().getTime();
    }

    function updateGoblin() {
      goblinHP = 5;
      document.getElementById("goblinName").textContent = `${randomGoblin()} appears!`;
      updateHPBar();
      updateQuestion();
      log(`${playerName}, a wild goblin appears! Solve fast!`);
    }

    function updateHPBar() {
      const goblinHearts = "‚ù§Ô∏è".repeat(goblinHP);
      document.getElementById("goblinHp").textContent = `Goblin HP: ${goblinHearts}`;
      const playerHearts = "‚ù§Ô∏è".repeat(playerHP);
      document.getElementById("playerHp").textContent = `Your HP: ${playerHearts}`;
      document.getElementById("score").textContent = `Score: ${score}`;
    }

    function log(text) {
      document.getElementById("logText").textContent = text;
    }

    function submitAnswer() {
      const goblinElem = document.getElementById("goblinName");
      const userAnswer = parseInt(document.getElementById("answer").value);
      const timeTaken = (new Date().getTime() - startTime) / 1000;

      if (userAnswer === currentQuestion.answer) {
        const bonus = timeTaken < 5 ? 2 : 1;
        goblinHP -= bonus;
        goblinElem.classList.add("hit");

        setTimeout(() => goblinElem.classList.remove("hit"), 400);

        if (goblinHP <= 0) {
          score++;
          log(`Correct! You defeated the goblin in ${timeTaken.toFixed(2)}s! üéâ`);
          setTimeout(updateGoblin, 2000);
        } else {
          log(`Correct! You hit the goblin for ${bonus} damage.`);
        }
      } else {
        playerHP--;
        log(`Wrong! The goblin slaps you with a slimy fish. üêü`);
        if (playerHP <= 0) {
          log(`Game Over, ${playerName}! Final Score: ${score}`);
          document.getElementById("gameArea").style.display = "none";
          return;
        }
      }

      updateHPBar();
      updateQuestion();
    }
  </script>
</body>
</html>
